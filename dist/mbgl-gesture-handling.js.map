{"version":3,"file":"mbgl-gesture-handling.js","sources":["../src/index.js"],"sourcesContent":["\"use strict\"\n\nlet timer;\n\nclass GestureHandling {\n  constructor(options) {\n    this.id = 'mbgl-gesture-handling-help';\n\n    this.settings = {\n      backgroundColor: 'rgba(0, 0, 0, 0.8)',\n      textColor: '#ffffff',\n      textMessage: 'Use alt + scroll to zoom the map.',\n      textMessageMobile: 'Use two fingers to move the map.',\n      timeout: 3000,\n      ...options\n    };\n\n    this.helpElement = document.querySelector(`#${this.id}`);\n\n    if (null === this.helpElement) {\n      this.helpElement = document.createElement('div');\n      this.helpElement.id = this.id;\n      this.helpElement.style.backgroundColor = this.settings.backgroundColor;\n      this.helpElement.style.position = 'absolute';\n      this.helpElement.style.display = 'none';\n      this.helpElement.style.zIndex = 9999;\n      this.helpElement.style.justifyContent = 'center';\n      this.helpElement.style.alignItems = 'center';\n\n      const textBox = document.createElement('div');\n      textBox.style.textAlign = 'center';\n      textBox.style.color = this.settings.textColor;\n      textBox.innerText = \"\";\n\n      this.helpElement.appendChild(textBox);\n      document.body.appendChild(this.helpElement);\n    }\n  }\n\n  showHelp(map, message) {\n    const rect = map.getContainer().getBoundingClientRect();\n    this.helpElement.style.top = `${rect.top + window.scrollY}px`;\n    this.helpElement.style.left = `${rect.left + window.scrollX}px`;\n    this.helpElement.style.width = `${rect.width}px`;\n    this.helpElement.style.height = `${rect.height}px`;\n    this.helpElement.style.display = 'flex';\n\n    this.helpElement.querySelector('div').innerText = message;\n  }\n\n  addTo(map) {\n    map.scrollZoom.disable();\n\n    this.helpElement.addEventListener('wheel', (event) => {\n      if (event.altKey) {\n        this.helpElement.style.display = 'none';\n        event.preventDefault()\n      } else {\n        clearTimeout(timer);\n\n        timer = setTimeout(() => {\n          this.helpElement.style.display = 'none';\n          map.scrollZoom.disable();\n        }, this.settings.timeout);\n      }\n    });\n\n    map.getContainer().addEventListener('wheel', (event) => {\n      if (event.altKey) {\n        map.scrollZoom.enable();\n      } else {\n        this.showHelp(map, this.settings.textMessage);\n      }\n    });\n\n    map.on('movestart', (event) => {\n      if (event.originalEvent && 'touches' in event.originalEvent && 2 > event.originalEvent.touches.length) {\n        this.showHelp(map, this.settings.textMessageMobile);\n        map.dragPan.disable();\n        timer = setTimeout(() => {\n          map.dragPan.enable();\n          this.helpElement.style.display = 'none';\n        }, this.settings.timeout);\n      }\n    });\n  }\n}\n\nexport default GestureHandling;\n"],"names":["let","timer","GestureHandling","constructor","options","id","settings","Object","backgroundColor","helpElement","document","querySelector","this","createElement","style","position","display","zIndex","justifyContent","alignItems","textBox","textAlign","color","textColor","innerText","appendChild","body","showHelp","map","message","rect","getContainer","getBoundingClientRect","top","window","scrollY","left","scrollX","width","height","addTo","scrollZoom","disable","addEventListener","event","altKey","preventDefault","clearTimeout","setTimeout","timeout","enable","textMessage","on","originalEvent","touches","length","textMessageMobile","dragPan"],"mappings":"AAEAA,IAAIC,EAEEC,EACJC,SAAYC,WACLC,GAAK,kCAELC,SAAWC,kBACdC,gBAAiB,+BACN,sBACE,sDACM,2CACV,aAINC,YAAcC,SAASC,kBAAkBC,KAAQ,IAElD,OAASA,KAAKH,YAAa,MACxBA,YAAcC,SAASG,cAAc,YACrCJ,YAAYJ,GAAKO,KAAKP,QACtBI,YAAYK,MAAMN,gBAAkBI,KAAKN,SAASE,qBAClDC,YAAYK,MAAMC,SAAW,gBAC7BN,YAAYK,MAAME,QAAU,YAC5BP,YAAYK,MAAMG,OAAS,UAC3BR,YAAYK,MAAMI,eAAiB,cACnCT,YAAYK,MAAMK,WAAa,aAE9BC,EAAUV,SAASG,cAAc,OACvCO,EAAQN,MAAMO,UAAY,WAClBP,MAAMQ,MAAQV,KAAKN,SAASiB,UACpCH,EAAQI,UAAY,QAEff,YAAYgB,YAAYL,YACpBM,KAAKD,YAAYb,KAAKH,eAInCkB,YAAAA,kBAASC,EAAKC,OACNC,EAAOF,EAAIG,eAAeC,6BAC3BvB,YAAYK,MAAMmB,IAASH,EAAKG,IAAMC,OAAOC,kBAC7C1B,YAAYK,MAAMsB,KAAUN,EAAKM,KAAOF,OAAOG,kBAC/C5B,YAAYK,MAAMwB,MAAWR,kBAC7BrB,YAAYK,MAAMyB,OAAYT,mBAC9BrB,YAAYK,MAAME,QAAU,YAE5BP,YAAYE,cAAc,OAAOa,UAAYK,GAGpDW,YAAAA,eAAMZ,cACJA,EAAIa,WAAWC,eAEVjC,YAAYkC,iBAAiB,iBAAUC,GACtCA,EAAMC,UACHpC,YAAYK,MAAME,QAAU,OACjC4B,EAAME,mBAENC,aAAa9C,GAEbA,EAAQ+C,wBACDvC,YAAYK,MAAME,QAAU,OACjCY,EAAIa,WAAWC,WACd9B,EAAKN,SAAS2C,cAIjBlB,eAAeY,iBAAiB,iBAAUC,GACxCA,EAAMC,OACRjB,EAAIa,WAAWS,WAEVvB,SAASC,EAAKhB,EAAKN,SAAS6C,iBAIjCC,GAAG,qBAAcR,GACfA,EAAMS,eAAiB,YAAaT,EAAMS,eAAiB,EAAIT,EAAMS,cAAcC,QAAQC,WACxF5B,SAASC,EAAKhB,EAAKN,SAASkD,mBACjC5B,EAAI6B,QAAQf,UACZzC,EAAQ+C,sBACNpB,EAAI6B,QAAQP,WACPzC,YAAYK,MAAME,QAAU,QAChCJ,EAAKN,SAAS2C"}